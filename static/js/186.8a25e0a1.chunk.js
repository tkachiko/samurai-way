"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[186],{6186:function(e,t,o){o.r(t),o.d(t,{default:function(){return K}});var r=o(1413),a=o(5671),s=o(3144),i=o(136),n=o(8557),c=o(2791),l=o(9439),u={main:"ProfileInfo_main__0HZWS",descriptionBlock:"ProfileInfo_descriptionBlock__bjGBA"},d=o(3445),f=o(184),p=function(e){var t=(0,c.useState)(!1),o=(0,l.Z)(t,2),r=o[0],a=o[1],s=(0,c.useState)(e.status),i=(0,l.Z)(s,2),n=i[0],u=i[1];(0,c.useEffect)((function(){u(e.status)}),[e.status]);return(0,f.jsxs)(f.Fragment,{children:[!r&&(0,f.jsx)("div",{children:(0,f.jsx)("span",{onDoubleClick:function(){a(!0)},children:e.status||"------"})}),r&&(0,f.jsx)("div",{children:(0,f.jsx)("input",{type:"text",autoFocus:!0,onBlur:function(){a(!1),e.updateStatus(n)},onChange:function(e){u(e.currentTarget.value)},value:n})})]})},h=o(9279),m={profileInfo:"ProfileData_profileInfo__kwq2M",buttonEdit:"ProfileData_buttonEdit__+qlXL",heading:"ProfileData_heading__h7G9A",contacts:"ProfileData_contacts__8Cp3A",contactIcon:"ProfileData_contactIcon__EhTdl",contactsBlock:"ProfileData_contactsBlock__97KHw",contactsAbout:"ProfileData_contactsAbout__4cZVB",contactsAboutBlock:"ProfileData_contactsAboutBlock__1jKJZ",contactsDescription:"ProfileData_contactsDescription__1hCvr",contactsJobBlock:"ProfileData_contactsJobBlock__DbFIf",formSummaryError:"ProfileData_formSummaryError__Sh7Ex",inputBlockContainer:"ProfileData_inputBlockContainer__yYpZV",inputBlock:"ProfileData_inputBlock__TWI7A",headingForm:"ProfileData_headingForm__vlHof",contactsSocials:"ProfileData_contactsSocials__AGymx",lookingForAJob:"ProfileData_lookingForAJob__OFsNm"};var b=o.p+"static/media/vk.e177ac611e877b60bbb73debef370e30.svg";var v=o.p+"static/media/github.69fd7327748bf1eeed7ba42ac36c38ed.svg";var g=o.p+"static/media/instagram.05fa8ace733e40883b2a85aaea55031b.svg";var j=o.p+"static/media/facebook.59fa0b94d9d92eedf4a1e705c3686d4e.svg";var x=o.p+"static/media/twitter.e7e0d1c3bd8831be425dc4f57e891664.svg";var k=o.p+"static/media/globe-grid.5137056797fb851e15434cba14a1ffed.svg";var _=o.p+"static/media/youtube.54c0aa7dda26b7f8e7bb9d8d369fd162.svg",P=function(e){var t=e.profile,o=e.isOwner,r=e.activateEditMode,a=Object.entries(t.contacts).filter((function(e){var t=(0,l.Z)(e,2);return[t[0],t[1]]})),s={vk:b,github:v,instagram:g,facebook:j,twitter:x,website:k,youtube:_,mainLink:k};return(0,f.jsxs)("div",{className:m.profileInfo,children:[(0,f.jsx)("div",{className:"".concat(m.contacts),children:a.length>0&&(0,f.jsx)(f.Fragment,{children:a.map((function(e){var t=(0,l.Z)(e,2),o=t[0],r=t[1];return r&&(0,f.jsx)("div",{className:m.contacts__socials,children:(0,f.jsx)("a",{target:"_blank",rel:"noreferrer",href:r,children:(0,f.jsx)("div",{className:m.contactIcon,style:{backgroundImage:"url(".concat(s[o],")"),backgroundSize:"cover"}})})},o)}))})}),o&&(0,f.jsx)("div",{className:"".concat(m.buttonEdit),children:(0,f.jsx)("button",{onClick:r,children:"Edit profile"})}),(0,f.jsxs)("div",{className:m.contactsBlock,children:[(0,f.jsxs)("div",{className:m.contactsAboutBlock,children:[(0,f.jsx)("h6",{className:"".concat(m.contactsAbout," ").concat(m.heading),children:"About me:\xa0"}),(0,f.jsx)("p",{className:"".concat(m.contactsAboutInfo),children:t.aboutMe})]}),(0,f.jsx)("div",{className:"".concat(m.contactsJobBlock),children:t.lookingForAJob&&(0,f.jsxs)("div",{children:[(0,f.jsx)("h6",{className:"".concat(m.heading),children:"Looking for a job: "}),(0,f.jsx)("div",{className:m.lookingForAJob})]})}),t.lookingForAJob&&(0,f.jsxs)("div",{className:"".concat(m.contactsDescription),children:[(0,f.jsxs)("h6",{className:"".concat(m.heading," ").concat(m.contactsJobDescription),children:["Description:"," "]}),(0,f.jsx)("p",{children:t.lookingForAJobDescription})]})]})]})},Z=o(5987),A=o(9343),y=o(6448),D=o(1358),I=o(4891),N=o(9520),S=o(5290),w=["onChange","onBlur","value","ref"],B=function(e){var t=(0,S.cI)({defaultValues:{fullName:e.profile.fullName,lookingForAJob:e.profile.lookingForAJob,lookingForAJobDescription:e.profile.lookingForAJobDescription,aboutMe:e.profile.aboutMe,contacts:{facebook:e.profile.contacts.facebook,website:e.profile.contacts.website,vk:e.profile.contacts.vk,twitter:e.profile.contacts.twitter,instagram:e.profile.contacts.instagram,youtube:e.profile.contacts.youtube,github:e.profile.contacts.github,mainLink:e.profile.contacts.mainLink}}}),o=t.handleSubmit,a=t.control,s={labelCol:{span:4},wrapperCol:{span:16}};return(0,f.jsxs)(A.Z,(0,r.Z)((0,r.Z)({},s),{},{name:"nest-messages",onFinish:o((function(t){e.saveProfile(t,e.setEditMode)})),validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"}},children:[(0,f.jsx)(A.Z.Item,{name:"fullName",label:"Name",children:(0,f.jsx)(S.Qr,{name:"fullName",control:a,rules:{required:!0},render:function(e){var t=e.field;return(0,f.jsx)(y.Z,(0,r.Z)({},t))}})}),(0,f.jsx)(A.Z.Item,{name:"lookingForAJob",label:"Looking for a job",children:(0,f.jsx)(S.Qr,{name:"lookingForAJob",control:a,render:function(e){var t=e.field;return(0,f.jsx)(N.Z,(0,r.Z)((0,r.Z)({},t),{},{checked:t.value}))}})}),(0,f.jsx)(A.Z.Item,{name:"lookingForAJobDescription",label:"My skills",children:(0,f.jsx)(S.Qr,{name:"lookingForAJobDescription",control:a,rules:{required:!0},render:function(e){var t=e.field;return(0,f.jsx)(y.Z.TextArea,(0,r.Z)((0,r.Z)({},t),{},{placeholder:"Tell about your professional skills and what kind of job you are looking for"}))}})}),(0,f.jsx)(A.Z.Item,{name:"aboutMe",label:"About me",children:(0,f.jsx)(S.Qr,{name:"aboutMe",control:a,rules:{required:!0},render:function(e){var t=e.field;return(0,f.jsx)(y.Z.TextArea,(0,r.Z)((0,r.Z)({},t),{},{placeholder:"Some info about you"}))}})}),Object.keys(e.profile.contacts).map((function(t){return(0,f.jsx)(A.Z.Item,{name:t,label:t,children:(0,f.jsx)(S.Qr,{name:"contacts."+t,control:a,render:function(o){var a=o.field,s=a.onChange,i=(a.onBlur,a.value,a.ref),n=(0,Z.Z)(a,w);return(0,f.jsx)(y.Z,(0,r.Z)((0,r.Z)({onChange:s},n),{},{ref:i,placeholder:t,defaultValue:e.profile.contacts[t]}))}})},t)})),(0,f.jsx)(A.Z.Item,{wrapperCol:(0,r.Z)((0,r.Z)({},s.wrapperCol),{},{offset:8}),children:(0,f.jsx)(D.Z,{type:"primary",htmlType:"submit",children:"Save"})}),e.error&&(0,f.jsx)(I.Z,{message:e.error,type:"error"})]}))},F=function(e){var t=e.profile,o=e.status,r=e.updateStatus,a=e.isOwner,s=e.updatePhoto,i=e.saveProfile,n=e.error,m=(0,c.useState)(!1),b=(0,l.Z)(m,2),v=b[0],g=b[1];if(!t)return(0,f.jsx)(d.p,{});return(0,f.jsx)("div",{children:(0,f.jsx)("div",{className:u.main,children:(0,f.jsxs)("div",{className:u.descriptionBlock,children:[(0,f.jsx)("img",{src:t.photos.large||h,alt:"user avatar"}),a&&(0,f.jsx)("input",{type:"file",onChange:function(e){e.target.files&&e.target.files.length&&s(e.target.files[0])}}),(0,f.jsx)("h5",{className:u.heading,children:t.fullName}),(0,f.jsx)(p,{status:o,updateStatus:r}),v?(0,f.jsx)(B,{profile:t,error:n,setEditMode:g,saveProfile:i}):(0,f.jsx)(P,{profile:t,isOwner:a,activateEditMode:function(){g(!0)}})]})})})},C=o(81),J=o(3433),M="MyPosts_postsBlock__lB-pf",E="MyPosts_posts__GSiZ2",T="Post_item__Yu4oG",q=function(e){var t=e.message,o=e.like;return(0,f.jsxs)("div",{className:T,children:[(0,f.jsx)("img",{src:"https://thumbs.dreamstime.com/b/frenchbulldog-198912643.jpg",alt:"user avatar"}),t,(0,f.jsx)("div",{children:(0,f.jsxs)("span",{children:[o," likes"]})})]})},O=function(e){var t=(0,S.cI)({defaultValues:{newPostText:""}}),o=t.register,a=t.handleSubmit;return(0,f.jsxs)("form",{onSubmit:a((function(t){e.onSubmit(t)})),children:[(0,f.jsx)("div",{children:(0,f.jsx)("textarea",(0,r.Z)((0,r.Z)({},o("newPostText")),{},{placeholder:"Enter you message"}))}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{type:"submit",children:"Add"})})]})},U=(0,c.memo)((function(e){var t=e.profilePage,o=e.addPost,r=(0,J.Z)(t.posts).reverse().map((function(e){return(0,f.jsx)(q,{message:e.message,like:e.likesCount},e.id)}));return(0,f.jsxs)("div",{className:M,children:["My posts",(0,f.jsx)(O,{onSubmit:function(e){o(e.newPostText)}}),(0,f.jsx)("div",{className:E,children:r})]})})),L=o(364),$=(0,L.$j)((function(e){return{profilePage:e.profilePage}}),{addPost:C.q2})(U),G=function(e){var t=e.profile,o=e.status,r=e.updateStatus,a=e.isOwner,s=e.updatePhoto,i=e.saveProfile,n=e.error;return(0,f.jsx)("div",{children:(0,f.jsxs)("div",{children:[(0,f.jsx)(F,{profile:t,status:o,updateStatus:r,isOwner:a,error:n,updatePhoto:s,saveProfile:i}),(0,f.jsx)($,{})]})})},Q=o(9271),V=o(2163),z=o(7781),H=function(e){(0,i.Z)(o,e);var t=(0,n.Z)(o);function o(){return(0,a.Z)(this,o),t.apply(this,arguments)}return(0,s.Z)(o,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||null===this.props.authorizedUserId||(e=this.props.authorizedUserId.toString())||this.props.history.push("login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,o){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,f.jsx)(G,(0,r.Z)((0,r.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,updatePhoto:this.props.updatePhoto,error:this.props.error,saveProfile:this.props.saveProfile}))}}]),o}(c.Component),K=(0,z.qC)((0,L.$j)((function(e){return{error:e.profilePage.error,profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:C.et,getStatus:C.lR,updateStatus:C.Nf,updatePhoto:C.tU,saveProfile:C.Ii}),Q.EN,V.e)(H)},2163:function(e,t,o){o.d(t,{e:function(){return u}});var r=o(1413),a=o(5987),s=o(9271),i=(o(2791),o(364)),n=o(184),c=["isAuth"],l=function(e){return{isAuth:e.auth.isAuth}};function u(e){return(0,i.$j)(l)((function(t){var o=t.isAuth,i=(0,a.Z)(t,c);return o?(0,n.jsx)(e,(0,r.Z)({},i)):(0,n.jsx)(s.l_,{to:"/login"})}))}},9279:function(e,t,o){e.exports=o.p+"static/media/user-image.28e44cb7f5d2425541e5.png"}}]);
//# sourceMappingURL=186.8a25e0a1.chunk.js.map